Database URL configured: mysql+pymysql://root:****@localhost:3306/bcms_db
DEBUG [session.py]: Original DATABASE_URL for async: mysql+pymysql://root:Password123!@localhost:3306/bcms_db
DEBUG [session.py]: ASYNC_DATABASE_URL set to: mysql+aiomysql://root:Password123!@localhost:3306/bcms_db
Ensure your MySQL server is running and the database exists.
You might need to install pymysql: pip install pymysql
============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-8.3.5, pluggy-1.6.0
rootdir: /Users/bharats/Library/CloudStorage/OneDrive-CYRAACSERVICESPRIVATELIMITED/Work/Product Management/Replit Projects/BCMS/Windsurf
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0
asyncio: mode=strict, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collected 17 items

backend/app/tests/api/test_applications_api.py DEBUG [conftest.py create_test_tables]: All tables created.
DEBUG [conftest.py create_test_tables - SYNC]: Table 'people' not found.
DEBUG [conftest.py create_test_tables - SYNC]: Schema for table 'organizations':
  SYNC Column: id, Type: CHAR(32)
  SYNC Column: name, Type: VARCHAR(255)
  SYNC Column: description, Type: TEXT
  SYNC Column: industry, Type: VARCHAR(100)
  SYNC Column: isActive, Type: BOOLEAN
  SYNC Column: createdAt, Type: DATETIME
  SYNC Column: updatedAt, Type: DATETIME
DEBUG [conftest.py create_test_tables - SYNC]: Schema for table 'roles':
  SYNC Column: id, Type: CHAR(32)
  SYNC Column: name, Type: VARCHAR(50)
  SYNC Column: description, Type: TEXT
  SYNC Column: organization_id, Type: CHAR(32)
  SYNC Column: createdAt, Type: DATETIME
  SYNC Column: updatedAt, Type: DATETIME
DEBUG [conftest.py create_test_tables - SYNC]: Schema for table 'permissions':
  SYNC Column: id, Type: CHAR(32)
  SYNC Column: name, Type: VARCHAR(255)
  SYNC Column: description, Type: TEXT
  SYNC Column: createdAt, Type: DATETIME
  SYNC Column: updatedAt, Type: DATETIME
DEBUG [conftest.py create_test_tables - SYNC]: Table 'people_roles' not found.
DEBUG [conftest.py create_test_tables - SYNC]: Schema for table 'role_permissions':
  SYNC Column: role_id, Type: CHAR(32)
  SYNC Column: permission_id, Type: CHAR(32)
DEBUG [conftest.py create_test_tables - SYNC]: Schema for table 'applications':
  SYNC Column: id, Type: CHAR(32)
  SYNC Column: name, Type: VARCHAR(255)
  SYNC Column: description, Type: TEXT
  SYNC Column: type, Type: VARCHAR(5)
    SYNC 'applications.type' column found. Type: VARCHAR(5)
  SYNC Column: hostedOn, Type: VARCHAR(255)
  SYNC Column: workarounds, Type: TEXT
  SYNC Column: derivedRTO, Type: VARCHAR(50)
  SYNC Column: status, Type: VARCHAR(8)
  SYNC Column: organizationId, Type: CHAR(32)
  SYNC Column: appOwnerId, Type: CHAR(32)
EEEEEEEEEEEEEEEEEDEBUG [conftest.py create_test_tables]: All tables dropped.


==================================== ERRORS ====================================
__________________ ERROR at setup of test_create_application ___________________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
____________ ERROR at setup of test_create_application_minimal_data ____________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
________ ERROR at setup of test_create_application_invalid_app_owner_id ________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
___________ ERROR at setup of test_create_application_duplicate_name ___________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
___________________ ERROR at setup of test_read_application ____________________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
______________ ERROR at setup of test_read_application_not_found _______________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
________________ ERROR at setup of test_read_applications_empty ________________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
________________ ERROR at setup of test_read_applications_list _________________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
______ ERROR at setup of test_read_applications_pagination_and_filtering _______
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
__________________ ERROR at setup of test_update_application ___________________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
_____________ ERROR at setup of test_update_application_not_found ______________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
___________ ERROR at setup of test_update_application_invalid_owner ____________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
__________________ ERROR at setup of test_delete_application ___________________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
_____________ ERROR at setup of test_delete_application_not_found ______________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
______ ERROR at setup of test_update_application_cross_organization_fail _______
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
______ ERROR at setup of test_delete_application_cross_organization_fail _______
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
__________ ERROR at setup of test_delete_already_deleted_application ___________
ScopeMismatch: You tried to access the function scoped fixture _function_event_loop with a session scoped request object. Requesting fixture stack:
backend/app/tests/conftest.py:52:  def create_test_tables_async(async_engine_fixture)
Requested fixture:
venv/lib/python3.9/site-packages/pytest_asyncio/plugin.py:843:  def _scoped_event_loop(*args, event_loop_policy) -> 'Iterator[asyncio.AbstractEventLoop]'
=========================== short test summary info ============================
ERROR backend/app/tests/api/test_applications_api.py::test_create_application
ERROR backend/app/tests/api/test_applications_api.py::test_create_application_minimal_data
ERROR backend/app/tests/api/test_applications_api.py::test_create_application_invalid_app_owner_id
ERROR backend/app/tests/api/test_applications_api.py::test_create_application_duplicate_name
ERROR backend/app/tests/api/test_applications_api.py::test_read_application
ERROR backend/app/tests/api/test_applications_api.py::test_read_application_not_found
ERROR backend/app/tests/api/test_applications_api.py::test_read_applications_empty
ERROR backend/app/tests/api/test_applications_api.py::test_read_applications_list
ERROR backend/app/tests/api/test_applications_api.py::test_read_applications_pagination_and_filtering
ERROR backend/app/tests/api/test_applications_api.py::test_update_application
ERROR backend/app/tests/api/test_applications_api.py::test_update_application_not_found
ERROR backend/app/tests/api/test_applications_api.py::test_update_application_invalid_owner
ERROR backend/app/tests/api/test_applications_api.py::test_delete_application
ERROR backend/app/tests/api/test_applications_api.py::test_delete_application_not_found
ERROR backend/app/tests/api/test_applications_api.py::test_update_application_cross_organization_fail
ERROR backend/app/tests/api/test_applications_api.py::test_delete_application_cross_organization_fail
ERROR backend/app/tests/api/test_applications_api.py::test_delete_already_deleted_application
============================== 17 errors in 0.06s ==============================
