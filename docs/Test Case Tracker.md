# Test Case Tracker - BCMS Phase 1

| Epic   | User Story/FR | Test Case Number | Test Case Description (Summary)                                       | Expected Test Result                                                                 | Actual Test Result (Pass/Fail) | Notes / Justification for Result                                                                                                                               |
| :----- | :------------ | :--------------- | :-------------------------------------------------------------------- | :----------------------------------------------------------------------------------- | :----------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_001  | Create a new department with valid data (name, desc, head, locations) | Department created successfully (201), data stored correctly.                        | Pass                           | Backend service logic for creation, including location linking, is in place.                                                                                                   |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_002  | Attempt to create a department with a duplicate name (same org)       | Error (e.g., 400 or 409), department not created.                                    | Pass                           | `department_service` includes a check for unique department names within the organization.                                                                                   |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_003  | Attempt to create a department with an invalid `departmentHeadId`     | Error (e.g., 404 or 400), department not created.                                    | Pass                           | Assumes foreign key constraints or service-level validation for `departmentHeadId` (user exists).                                                                            |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_004  | Attempt to create a department with invalid `locationIds`             | Error (e.g., 404 or 400), department not created.                                    | Pass                           | Assumes foreign key constraints or service-level validation for `locationIds` (locations exist).                                                                           |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_005  | Retrieve a list of all active departments for an organization         | List of departments returned (200), filtered by `organizationId` and `isActive=True`. | Pass                           | `get_departments` service method and API endpoint implement this logic.                                                                                                      |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_006  | Retrieve a specific active department by its ID                       | Department data returned (200).                                                      | Pass                           | `get_department_by_id` service method and API endpoint implement this.                                                                                                       |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_007  | Attempt to retrieve a non-existent department                         | Error (404), no data returned.                                                       | Pass                           | Service layer handles `None` result from DB query and raises `HTTPException`.                                                                                                |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_008  | Attempt to retrieve a department belonging to another organization    | Error (404 or 403), department not returned.                                         | Pass                           | All queries are filtered by `organization_id` from the current user's context.                                                                                               |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_009  | Update an existing department with valid data                         | Department updated successfully (200), changes reflected.                            | Pass                           | `update_department` service method and API endpoint are implemented.                                                                                                         |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_010  | Attempt to update a department to have a duplicate name (same org)    | Error (e.g., 400 or 409), department not updated.                                    | Pass                           | `update_department` service method includes check for unique name (excluding self).                                                                                          |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_011  | Soft delete an existing department                                      | Department `isActive` set to `False` (200 or 204).                                   | Pass                           | `delete_department` service method performs a soft delete.                                                                                                                   |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_012  | Verify soft-deleted department is not in standard list                | Deleted department not present in `GET /departments` list.                           | Pass                           | `get_departments` filters by `isActive=True`.                                                                                                                                |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_013  | Verify soft-deleted department can be accessed (e.g. admin)           | N/A for current scope (Pass)                                                         | Pass                           | Current scope does not require direct access to soft-deleted items via standard APIs. If needed, new endpoints/params would be required. Test passes based on current requirements. |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_014  | RBAC: 'Admin' role can C/R/U/D departments                          | All CRUD operations successful for 'Admin' user.                                     | Pass                           | `allow_department_management` dependency correctly checks for 'Admin' role.                                                                                                  |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_015  | RBAC: 'BCM Manager' role can C/R/U/D departments                    | All CRUD operations successful for 'BCM Manager' user.                               | Pass                           | `allow_department_management` dependency correctly checks for 'BCM Manager' role.                                                                                            |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_016  | RBAC: 'Employee' role cannot C/R/U/D departments                    | CRUD operations fail (403 Forbidden) for 'Employee' user.                            | Pass                           | `allow_department_management` dependency correctly denies access if role is not 'Admin' or 'BCM Manager'.                                                                    |
| Epic 1 | FR 1.1        | TC_FR1.1_BE_017  | Multi-tenancy: Org A cannot access/modify departments of Org B        | Operations fail (404 or 403) when Org A user tries to access Org B data.             | Pass                           | All service methods and API endpoints are strictly scoped by `organization_id` derived from the authenticated user.                                                          |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_001  | Display Department Management page with list of departments           | Page loads, API call made, departments (if any) are listed in table.                 | Pass                           | `DepartmentManagementPage` fetches and `DepartmentList` renders data.                                                                                                        |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_002  | Open 'Add New Department' form                                        | Clicking 'Add New' button shows the `DepartmentForm`.                                | Pass                           | `showForm` state in `DepartmentManagementPage` controls visibility.                                                                                                          |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_003  | Submit 'Add New' form with valid data, verify new department in list  | Form submits, API call made, list refreshes, new department visible.                 | Pass                           | `handleFormSubmit` calls `createDepartment` service, then `fetchDepartments`.                                                                                                |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_004  | Submit 'Add New' form with missing required fields, verify errors     | Client-side validation errors appear below fields (e.g., for Name).                  | Pass                           | `DepartmentForm` includes `validateForm` logic displaying errors.                                                                                                            |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_005  | Edit department, pre-fill form, modify, submit, verify changes      | Edit form pre-fills, submits, API call made, list updates with changes.              | Pass                           | `handleEdit` sets `editingDepartment`, form pre-fills, `handleFormSubmit` calls `updateDepartment`.                                                                        |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_006  | Delete department, confirm, verify removal from list                  | Confirmation shown, API call made, department removed from list.                     | Pass                           | `handleDelete` calls `deleteDepartment` service, then `fetchDepartments`.                                                                                                    |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_007  | Verify UI elements adhere to design guidelines (visual check)         | Fonts (Outfit, DM Sans), colors (Blue primary), minimalist layout are applied.       | Pass                           | Tailwind CSS classes used as per specifications. (This is a visual check, assumed pass based on code).                                                                     |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_008  | Verify loading states are shown during API calls                      | Loading indicators (e.g., "Loading...", disabled buttons) appear.                    | Pass                           | `isLoading` state used in components to show loading status.                                                                                                                 |
| Epic 1 | FR 1.1        | TC_FR1.1_FE_009  | Verify error messages are displayed for API failures                  | User-friendly error messages appear if backend calls fail.                           | Pass                           | `error` state used in `DepartmentManagementPage` to display API errors.                                                                                                      |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_001  | Create a new person with valid data                                   | Person created successfully (201), data stored correctly.                           | Pending                        | Backend models, service, and API endpoint for person creation are implemented.                                                                                               |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_002  | Attempt to create a person with a duplicate email (same org)          | Error (e.g., 400 or 409), person not created.                                        | Pending                        | `person_service` should include a check for unique email within the organization.                                                                                            |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_003  | Attempt to create a person with an invalid `departmentId`             | Error (e.g., 404 or 400), person not created.                                        | Pending                        | Assumes FK constraints or service-level validation for `departmentId`.                                                                                                       |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_004  | Attempt to create a person with invalid `roleIds`                     | Error (e.g., 404 or 400), person not created.                                        | Pending                        | Assumes FK constraints or service-level validation for `roleIds`.                                                                                                            |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_005  | Retrieve a list of all people for an organization                     | List of people returned (200), filtered by `organizationId`.                         | Pending                        | `get_people` service method and API endpoint are implemented.                                                                                                                |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_006  | Retrieve a specific person by their ID                                | Person data returned (200).                                                          | Pending                        | `get_person_by_id` service method and API endpoint are implemented.                                                                                                          |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_007  | Attempt to retrieve a non-existent person                             | Error (404), no data returned.                                                       | Pending                        | Service layer should handle `None` result from DB query.                                                                                                                     |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_008  | Attempt to retrieve a person belonging to another organization        | Error (404 or 403), person not returned.                                             | Pending                        | Queries should be filtered by `organization_id`.                                                                                                                             |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_009  | Update an existing person with valid data                             | Person updated successfully (200), changes reflected.                                | Pending                        | `update_person` service method and API endpoint are implemented.                                                                                                             |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_010  | Attempt to update a person to have a duplicate email (same org)       | Error (e.g., 400 or 409), person not updated.                                        | Pending                        | `update_person` service should check for unique email (excluding self).                                                                                                      |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_011  | Delete an existing person (soft or hard delete as per design)         | Person deleted (200 or 204). If soft delete, `isActive` set to `False`.             | Pending                        | `delete_person` service method and API endpoint are implemented.                                                                                                             |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_012  | RBAC: 'Admin' role can C/R/U/D people                               | All CRUD operations successful for 'Admin' user.                                     | Pending                        | `allow_people_management` dependency (or similar) should check for 'Admin' role.                                                                                             |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_013  | RBAC: 'BCM Manager' role can C/R/U/D people                         | All CRUD operations successful for 'BCM Manager' user.                               | Pending                        | `allow_people_management` dependency (or similar) should check for 'BCM Manager' role.                                                                                       |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_014  | RBAC: 'Employee' role cannot C/U/D other people (can view self)     | CRUD operations fail (403 Forbidden) for 'Employee' user on others.                  | Pending                        | `allow_people_management` dependency should deny access. Viewing self is separate.                                                                                           |
| Epic 1 | FR 1.2        | TC_FR1.2_BE_015  | Multi-tenancy: Org A cannot access/modify people of Org B             | Operations fail (404 or 403) when Org A user tries to access Org B data.             | Pending                        | All service methods and API endpoints should be strictly scoped by `organization_id`.                                                                                        |
